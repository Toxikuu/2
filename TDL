# Project: two

TODO

    Attempt to update instead of installing if -i is passed, the package is already installed, and it's outdated

    Add a way to specify repo when dealing with sets
        I'm thinking assume all repos unless repo/ is specified (for special sets)
        otherwise resolve ambiguity
  
        probably not necessary yet

    Low priority: add m-remove
        also add m-downgrade

    Work on mdbook docs

WIP

    Have the execution logic as a PM method
        Also pass args to it
        This is to address the `2 -bi dependency package` issue
        Iterate over each package, checking the flags

    Expand the main repo

DONEISH

    Use more nf icons

    Make the downloads actually happen at the start
  
    Add sets for installed, outdated, etc

    Migrate from lazy_static to once_cell for everything
        Used std::sync::LazyLock instead

    Allow viewing package changelogs with -H
  
    Make -U show the repo as well as the package name
        cus
            main/kernel
            tox/kernel

    // fucking hell i was tired :sob:
    Fix the fucking the thing the parallel dowlnoads fuck im tired
        make the downloads happen at the start but not like in parallel because every fucking crate author is allergic to writing good documentation with examples of how to use the fucking library
        also it would make logging a lot simpler

    Fix upstream version commands for xorg/

    Rayon support for -U is badly needed

    Update to ureq 3

    Fix upstream version commands for main/

    Move .uv.toml data back into info.lock and BUILD, simplifying stuff
    Add upstream version checking

    Add per package history tracking
        Add autogenerated via scripts changelogs for package builds

    Added m-move

    Updated m-*

    Figure out how to make documentation not show in --help as it currently does

    Add --provides (-P) to see what package provides a certain file via searching manifests

    Add more (source code) documentation

    Use anyhow

    Add log4rs or tracing integration (ideally only log to a file)

    Make -l list all packages for all repos

    Use Arc instead of Vec
        Maybe branch for this

    Add a master package log

    Add logs
        Master log in /var/log/2/master.log
        Per-package build logs in /usr/ports/<repo>/<package>/.logs/build.log

    Add syncing

    Add repo addition

    Remove exclusions from the config.toml

    Add repo priority and auto_ambiguity

    Fix sourceless package support
        Done; needs testing though

    Make file size update dynamically for unknown sizes

    make the scripts recognize $EDITOR

    Check if the necessary dot dirs exist for the passed package, and create them
        Would ensure cleaning works properly on first builds

    Remove all references to /code

    Fix bugs in install.sh
        Rustup toolchain handling
        no op for the currently nonexistent wget command
        fix /bin/2

    Check whether another package is installed before checking against its manifest when removing a specific package

    Fix set ambiguity

    Update the README

    Add an install.sh

    Migrate to using $D

    Add an option to exclude paths from the extraction

    actually implement pruning

    check source hashes during the setup stage

    Migrate build to /usr/ports/<repo>/<package>/.build

    Migrate sources to /usr/ports/<repo>/<package>/.sources

    Prefer ambiguity checks over verbose repo specification

    Add listing functionality

    Test package installation

    Add manifest checking and logic for package removal

    Add source fetching

DROPPED

    Make build.log only include the build logs
        Instead just used pkg.log

    ~~Add -! to reverse the behavior of (some) flags~~
        ~~For instance, -P shows what packages provide a file, but -!P might show what files a package provides~~
        Would be unintuitive and overly complex
        
IDEAS

    Add a file for enabled repos

    Consider using cfg_if

    Consider writing to a .part to avoid the possibility of incomplete tarballs because of an interrupted download

    Rayon everywhere

    Look into using --dereference with tar

    Dependencies support with a flag '-d' or similar
        Implies dependency resolution as well

    Make /usr/ports remappable
        Might not even be worth doing tbh
        Having it in a hardcoded spot is probably for the best

ROADMAP

    Features for 2-1.0.0:
        install script
        solid documentation with mdbook
